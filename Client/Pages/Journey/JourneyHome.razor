@page "/JourneyHome"
@layout MainLayout
@inject NavigationManager Nav
@inject JourneyService JourneyService

<HeadContent>
    <link href="css/Journey/JourneyHome.css" rel="stylesheet" />
</HeadContent>

<div class="home-container">

    <div class="card purple-card" @onclick='() => Nav.NavigateTo("/MyJourneys")'>
        <div class="card-title">Mijn reizen</div>
        @* @if (!isLoading)
        {
            <div class="count-badge purple">@myJourneyCount</div>
        } *@
        <div class="card-image-placeholder"></div>
    </div>

    <div class="card green-card" @onclick='() => Nav.NavigateTo("/CreateJourney")'>
        <div class="card-image-placeholder"></div>
        <div class="card-title">Ik zoek een reisbuddy</div>
    </div>

    <div class="card blue-card" @onclick='() => Nav.NavigateTo("/FindJourney")'>
        <div class="card-title">Help een buddy</div>
        @* @if (!isLoading)
        {
            <div class="count-badge blue">@buddyJourneyCount</div>
        } *@
        <div class="card-image-placeholder"></div>
    </div>

</div>

@code {
    private int myJourneyCount = 0;
    private int buddyJourneyCount = 0;
    //private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        //isLoading = true;

        var myJourneys = await JourneyService.GetMyJourneysAsync();
        if (myJourneys.IsSuccess)
            myJourneyCount = myJourneys.Data!.Count;

        var buddyJourneys = await JourneyService.GetBuddyJourneysAsync();
        if (buddyJourneys.IsSuccess)
            buddyJourneyCount = buddyJourneys.Data!.Count;

        //isLoading = false;
    }
}